<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>정규표현식</title>
    <link rel="stylesheet" href="../css/15_정규표현식.css" />
  </head>
  <body>
    <h1>정규 표현식(Regular Expresstion, RegExp)</h1>
    <pre>
        - 정규 표현식 또는 정규식

        - 특정한 규칙을 가진 문자열 집합을 표현하는데 사용하는 형식 언어

        - 입력된 문자열에 대한 특정 조건 검색, 일치 여부 판단, 치환에 대한
          조건문을 처리할 수 있음
    </pre>

    <h3>정규 표현식 참고 사이트</h3>
    <ul>
      <li>
        <a href="https://regexr.com/" target="_blank"
          >정규표현식 테스트 사이트</a
        >
      </li>
      <li>
        <a href="https://regexper.com/" target="_blank"
          >작성한 정규표현식을 그림으로 나타내주는 사이트</a
        >
      </li>
      <li>
        <a
          href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Guide/%EC%A0%95%EA%B7%9C%EC%8B%9D"
          target="_blank"
        >
          MDN - 정규표현식 설명
        </a>
      </li>
    </ul>
    <hr />
    <h1>정규 표현식 객체 생성 및 확인하기</h1>
    <pre>
        1. 정규 표현식 객체 생성 방법

        1) const regExp = new RegExp("정규표현식");
        2) const regExp = /정규표현식/;
                -> 양쪽 '/' 기호 정규 표현식의 리터럴 표기법
                * 리터럴 = 값을 직접 써서 표현하는 방식
                    ex) 리터럴 방식 (직접 작성하기)
                            변수이름    변수이름 내부에 들어갈 값 = 리터럴
                        const num1 = 10; // 10을 직접 작성
        2. 문자열 패턴 확인 메서드(함수)
        1) regExp.test(문자열)
            -> 문자열에 정규표현식과 일치하는 패턴이 있을 경우 true, 없으면 false
        2) regExp.exec(문자열)
            -> 문자열에 정규표현식과 일치하는 패턴이 있을 경우
                처음 매칭되는 문자열을 반환
                없으면 null 반환
    </pre>
    <hr />
    <h1>정규 표현식의 메타 문자</h1>
    <pre>
        문자열의 패턴을 나타내는 문자. 
        문자마다 지정된 특별한 뜻이 담겨있다.

        일반 문자열 : 같은 문자열이 존재하는지 검색
        -> /abc/        // abc라는 문자열이 존재하는지 검색

        [0~9] : 0부터 9까지 모든 숫자
        [ㄱ-힇] : ㄱ부터 힇까지 모든 한글
        [가-힇] : 가부터 힇까지 (단모음, 단자음 제외)
        [a-z] : 모든 영어 소문자
        [A-Z] : 모든 영어 대문자

        --------------------------------------------------

        [^] : 대괄호 안의 문자와 일치하지 않음
        -> /[^abcd]/    // a,b,c,d중 하나라도 일치하는 문자가 없음

        --------------------------------------------------

        ^(캐럿) : 문자열의 시작을 의미
        -> /^a/     // a로 시작한다.

        --------------------------------------------------

        $(달러) : 문자열의 끝을 의미
        -> /a$/     // a로 끝을 의미한다.

        --------------------------------------------------

        \ +         : 일반 문자가 아닌 특수한 기능의 문자로 인식

        \w (word, 단어) : 아무글자(단, 띄어쓰기, 특수문자, 한글 x)
        \d (digit, 숫자) : 아무 숫자(0~9 중 하나)
        \s (space, 공간) : 아무 공백 문자(띄어쓰기, 엔터, 탭 등)

        --------------------------------------------------

        * 수량 관련 메타 문자
        a{5} : a문자가 5개 존재 == aaaaa
        a{2,5} : a가 2개 이상 5개 이하 == aa, aaa, aaaa, aaaaa
        a{2,} : a가 최소 2개 이사이어야 한다.
    </pre>

    이름 : <input type="text" id="inputName" />
    <span id="nameResult"></span>

    <script>
      /* 입력 받은 이름이 한글 2~5글자 사이가 맞는지 확인 */
      const inputName = document.getElementById("inputName");
      const inputResult = document.getElementById("nameName");

      // inputName이 입력 되었을 경우 input의 경우 e.target.value 필수!
      inputName.addEventListener("input", (e) => {
        /* input 이벤트 : 입력과 관련된 모든 행동
        (단, 어떤 키로 입력했는지는 컴퓨터가 알 수 없음)*/
        // 입력된 값을 얻어오기
        const val = e.target.value; //이벤트가 발생한 요소의 값 가져오기

        // 아무것도 입력하지 않은 경우
        if (val.trim().length == 0) {
          nameResult.textContent = "";
          return;
        }
        /* 조건에 맞는 정규 표현식 객체 생성 */
        const regExp = /^[가-힇]{2,5}$/;

        /* 
        정규식객체.test(문자열) : 
        - 문자열이 정규식에 일치하면 true
        - 아니면 false */
        if (regExp.test(val)) {
          // 소비자가 작성한 값이 [가-힇] 내 이고, 2글자에서 5글자 사이에 입력한게 맞다면
          nameResult.textContent = "유효한 이름 형식입니다.";
          nameResult.style.color = "green";
        } else {
          nameResult.textContent = "유효하지 않은 이름 형식입니다.";
          nameResult.style.color = "red";
        }
      });
    </script>
    전화번호 <input type="text" id="inputPhone" />
    <div id="phoneResult"></div>
    <script>
      /* 입력 받은 값이 휴대전화 전화가 맞는지 확인 */
      const inputPhone = document.getElementById("inputPhone");
      const phoneResult = document.getElementById("phoneResult");

      inputPhone.addEventListener("input", (e) => {
        const value = e.target.value; //입력한 값

        /* 정규식을 이용한 핸드폰 번호 검사 */
        //          앞자리는 010, 011, 016, 017, 019 가능
        //          - 다음에 오는 \d 숫자는 3자리 또는 4자리만 가능
        //          - 다음에 오는 \d 숫자는 4자리만 가능
        //          /^ 정규식 시작         정규식 종료$/
        const regExp = /^01[01679]-\d{3,4}-\d{4}$/;

        if (regExp.test(value)) {
          // 입력받은 값이 정규식과 일치하면
          phoneResult.textContent = "유효한 번호 형식입니다.";
          phoneResult.classList = add("check");
          phoneResult.classList = remove("uncheck");
        } else {
          phoneResult.textContent = "번호가 유효하지 않습니다.";
          phoneResult.classList = add("check");
          phoneResult.classList = remove("uncheck");
        }
      });
    </script>
  </body>
</html>
